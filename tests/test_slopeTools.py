import sys
import os
sys.path.append(os.path.dirname(__file__) + "/../src")

import slopeTools


def test_getRegression():
    """
    test getRegression against a slope calculated by excel.
    """
    x = [0, 0.16667, 0.33333, 0.5, 0.66667, 0.83333, 1, 1.16667, 1.33333, 1.5, 1.66667, 1.83333, 2, 2.16667, 2.33333, 2.5, 2.66667, 2.83333, 3, 3.16667, 3.33333, 3.5, 3.66667, 3.83333, 4, 4.16667, 4.33333, 4.5, 4.66667, 4.83333, 5, 5.16667, 5.33333, 5.5, 5.66667, 5.83333, 6, 6.16667, 6.33333, 6.5, 6.66667, 6.83333, 7, 7.16667, 7.33333, 7.5, 7.66667, 7.83333, 8, 8.16667, 8.33333, 8.5, 8.66667, 8.83333, 9, 9.16667, 9.33333, 9.5, 9.66667, 9.83333, 10, 10.16667, 10.33333, 10.5, 10.66667, 10.83333, 11, 11.16667, 11.33333, 11.5, 11.66667, 11.83333, 12, 12.16667, 12.33333, 12.5, 12.66667, 12.83333, 13,
         13.16667, 13.33333, 13.5, 13.66667, 13.83333, 14, 14.16667, 14.33333, 14.5, 14.66667, 14.83333, 15, 15.16667, 15.33333, 15.5, 15.66667, 15.83333, 16, 16.16667, 16.33333, 16.5, 16.66667, 16.83333, 17, 17.16667, 17.33333, 17.5, 17.66667, 17.83333, 18, 18.16667, 18.33333, 18.5, 18.66667, 18.83333, 19, 19.16667, 19.33333, 19.5, 19.66667, 19.83333, 20, 20.16667, 20.33333, 20.5, 20.66667, 20.83333, 21, 21.16667, 21.33333, 21.5, 21.66667, 21.83333, 22, 22.16667, 22.33333, 22.5, 22.66667, 22.83333, 23, 23.16667, 23.33333, 23.5, 23.66667, 23.83333, 24, 24.16667, 24.33333, 24.5, 24.66667, 24.83333]
    y = [-4.63465, -5.51081, -5.66655, -5.79674, -7.6818, -3.8968, -6.69579, -5.71098, -6.10336, -6.24999, -6.75877, -6.69165, -4.90577, -2.20656, 0.43463, -3.94292, -4.78706, -5.34989, -6.36574, -4.63652, -5.31478, -2.10792, -5.61191, -4.36993, -4.36985, -3.11592, -2.12315, -4.33662, -4.02691, -2.33449, -6.08645, -8.26997, -5.08048, -3.97689, -4.42698, -3.04758, -4.79167, -4.6762, -5.4704, -6.55669, -3.9469, -5.35243, -6.06626, -4.8891, -4.84388, -5.19486, -7.22855, -8.71245, -8.21538, -8.53336, -13.44261, -13.40911, -13.16543, -13.80675, -15.79994, -16.88096, -16.646, -17.51654, -18.83702, -19.76602, -20.98734, -19.5933, -17.60265, -19.83353, -17.38733, -20.43717, -18.97912, -18.89598, -21.83465, -21.5112, -20.73059, -20.95396, -17.39119, -19.00177, -17.78977, -19.49595, -20.53733, -
         20.35184, -20.44803, -18.31261, -20.20521, -17.43426, -19.37423, -18.71905, -21.69927, -19.36978, -17.57406, -17.88728, -18.6616, -18.69261, -18.60541, -19.35205, -18.19312, -19.84095, -19.69003, -19.24259, -19.01911, -21.18759, -12.80981, -20.64312, -20.95864, -18.32492, -20.93545, -20.20677, -19.91784, -20.88027, -19.61825, -18.63966, -19.68358, -17.61944, -17.39662, -19.35619, -19.50095, -20.77288, -18.49318, -15.97496, -15.10942, -17.82308, -18.22963, -17.02892, -17.62901, -16.23215, -16.86382, -16.66236, -17.03443, -17.1747, -16.72648, -12.3339, -17.41958, -15.19357, -16.1032, -15.99566, -14.69315, -15.98535, -16.32571, -14.60911, -16.44876, -15.93673, -15.74539, -16.03647, -15.1236, -13.85857, -14.54128, -15.55408, -14.56132, -15.37301, -14.16098, -11.41092, -15.53702, -14.24759]

    slope, intercept = slopeTools.getRegression(y, 0.16667)
    assert round(slope, 3) == round(-0.612891263, 3)

    assert round(intercept, 3) == round(-5.908407152, 3)
